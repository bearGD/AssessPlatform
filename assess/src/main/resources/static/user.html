<!doctype html>
<html lang="zh">

<head>
    <title>个人中心</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
        crossorigin="anonymous">

    <!-- Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- echarts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts-en.common.min.js"></script>

</head>

<body>

    <div id="app">
        <nav class="navbar navbar-expand-lg navbar-light bg-primary">
            <a class="navbar-brand text-white" href="">abc</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link text-white" href="">官网
                        </a>
                    </li>
                </ul>

                <div class="btn-group">

                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        您好:{{username}}
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" style="min-width:6rem;">
                        <a class="dropdown-item " href="/">注销</a>
                        <a @click="b(5)" class="dropdown-item " role="button">设置密保问题</a>
                        <a @click="b(6)" class="dropdown-item" role="button">修改密码</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">

                <div class="col-lg-3" style="background-color: #f2f2f2">
                    <img src="img/5.jpg" class="rounded mx-auto d-block my-3" alt="头像" height="200px" width="200px">
                    <p v-show="authority==1" class="mt-3 text-center" style="margin-bottom:50px;">管理员:{{username}}</p>
                    <p v-show="authority==2" class="mt-3 text-center" style="margin-bottom:50px;">教员:{{username}}</p>
                    <p v-show="authority==3" class="mt-3 text-center" style="margin-bottom:50px;">学员:{{username}}</p>
                    <button @click="b(0)" v-if="authority==1 || authority==2 || authority==3" type="button" class="btn btn-primary btn-block my-3">查询教员评分</button>
                    <button @click="b(1)" v-if="authority==3" type="button" class="btn btn-primary btn-block my-3">评分</button>
                    <button @click="b(2)" v-if="authority==1" type="button" class="btn btn-primary btn-block my-3">教员列表</button>
                    <button @click="b(3)" v-if="authority==1" type="button" class="btn btn-primary btn-block my-3">学员列表</button>
                    <button @click="b(4)" v-if="authority==1" type="button" class="btn btn-primary btn-block my-3">题目列表</button>
                </div>
                <div class="col-lg-9 px-0" style="background-color: #F8EBEE;">
                    <div id="show">
                        <nav aria-label="breadcrumb" style="background-color:#cef0f2;">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    当前操作
                                </li>
                                <li class="breadcrumb-item">
                                    <span v-if="b==1" v-for="(b, index) in btn" :key="index">
                                        {{navcontent[index]}}
                                    </span>
                                </li>
                            </ol>
                        </nav>

                        <!-- 查询教员得分 -->
                        <div v-if="btn[0]==1" class="container-fluid px-0">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">

                                    <div v-if="qu==0" class="form-group">
                                        <label for="">请输入教员名字</label>
                                        <input v-model="teacher" type="text" class="form-control" placeholder="教员名字">
                                        <small id="notfound" class="form-text text-danger"></small>
                                        <button @click="query()" type="button" class="btn btn-success btn-block mt-3">查询</button>
                                    </div>

                                    <div v-if="qu==1">
                                        <div>
                                            <h3>教员名字:{{teacher}} </h3>
                                            <p style="font-size:1.5em;">平均得分:{{sum}}分</p>
                                        </div>
                                        <div>
                                            <ul class="nav nav-tabs">
                                                <li v-for="s in subjectNum" class="nav-item">
                                                    <button v-on:click="select(s)" class="nav-link" style="margin-left:0.5px;"
                                                        v-bind:class="[act==s?'active':'']">第{{s}}题</button>
                                                </li>
                                            </ul>
                                            <table class="table table-bordered" style="border:1px solid;">
                                                <thead>
                                                    <tr>
                                                        <th style="width:10%;">题目标号</th>
                                                        <th style="width:50%;">选项内容</th>
                                                        <th style="width:20%;">学员评分情况</th>
                                                        <th style="width:20%;">评分时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="(sj, index) in subject" :key="index" v-if="index+1 == act">
                                                        <td scope="row">{{act}}</td>
                                                        <td rowspan="2">{{sj}}</td>
                                                        <td>
                                                            <ul>
                                                                <li v-if="it.sub_id == act" v-for="it in items">{{it.content}}({{it.score}}分)</li>
                                                            </ul>
                                                        </td>
                                                        <td>
                                                            <ul>
                                                                <li v-if="i.sub_id == act" v-for="i in items">{{i.time}}</li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    <tr v-for="(sj, i) in subject" :key="i" v-if="i+1 == act">
                                                        <td>得分比率</td>
                                                        <td colspan="2">{{avg[i]}}%</td>
                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                    <div v-show="chart" id="c1" style="height: 400px;width: 590px;">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 评分 -->
                        <div v-else-if="btn[1]==1" class="container-fluid px-0">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <div v-if="site==-1">
                                        <h3>填写评分的教员和您所在的班级</h3>
                                        <div class="form-group">
                                            <label>教员</label>
                                            <input type="text" class="form-control" placeholder="教员名字" v-model="teacher">
                                        </div>
                                        <div class="form-group">
                                            <label>班级</label>
                                            <input type="text" class="form-control" placeholder="班级名称" v-model="className">
                                        </div>
                                        <button v-if="teacher==='' || className===''" @click="nextPace()" type="button"
                                            class="btn btn-primary btn-lg btn-block mt-4" disabled>开始评分</button>
                                        <button v-else @click="nextPace()" type="button" class="btn btn-primary btn-lg btn-block mt-4">开始评分</button>
                                    </div>

                                    <!-- 进度条 -->
                                    <div v-if="site > -1" class="progress">
                                        <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                                            role="progressbar" :style="{width: (site*100/subject.length)+ '%'}"
                                            aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">完成{{site}}题/共{{subject.length}}题</div>
                                    </div>

                                    <!-- 评分题目 -->
                                    <div v-for="(s, index) in subject" :key="index" v-if="site==index" class="jumbotron"
                                        style="height: 350px;">
                                        <!-- 题干 -->
                                        <h3>({{index+1}}){{s}}</h3>
                                        <hr class="my-2">
                                        <!-- 选项 -->
                                        <div v-for="(i, index2) in assitems" :key="index2" class="form-check  my-3">
                                            <label v-if="i.sub_id==index+1" class="form-check-label">
                                                <input type="radio" class="form-check-input" name="'item_'+index"
                                                    v-bind:value="index2" v-model="answer"> {{i.content}}({{i.score}}分)
                                            </label>
                                        </div>
                                        <!-- 按钮 -->
                                        <button v-if="site != subject.length-1 && answer==-1" @click="next()" type="button"
                                            class="btn btn-primary btn-lg btn-block mb-3" disabled>下一题</button>
                                        <button v-else-if="site != subject.length-1 && answer!=-1" @click="next()" type="button"
                                            class="btn btn-primary btn-lg btn-block mb-3">下一题</button>
                                        <button v-else @click="submit()" type="button" class="btn btn-primary btn-lg btn-block mt-3">提交</button>
                                    </div>

                                    <!-- 提交界面 -->
                                    <div v-if="site == subject.length" class="jumbotron" style="height:350px;">
                                        <h3>评分教员:{{teacher}}</h3>
                                        <hr class="my-2">
                                        <p style="font-size:1.5em;">教员总得分:{{sumScore}}(分)</p>
                                        <p style="font-size:1.5em;">谢谢您的反馈！我们会不断努力，力求完美！</p>
                                    </div>
                                </div>


                            </div>
                        </div>
                        <!-- 教员列表 -->
                        <div v-else-if="btn[2]==1">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th scope="col">编号</th>
                                                <th scope="col">教员名字</th>
                                                <th scope="col">权限</th>
                                                <th scope="col">操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(t, index) in qteacher" :key="index">
                                                <th scope="row">{{index+1}}</th>
                                                <td>{{t.name}}</td>
                                                <td>{{t.authority}}</td>
                                                <td>
                                                    <button @click="accredit(index)" type="button" class="btn btn-outline-primary btn-sm">授权</button>
                                                    <button type="button" class="btn btn-outline-danger btn-sm"
                                                        data-toggle="modal" data-target="#del1">删除</button>
                                                    <!-- Modal -->
                                                    <div class="modal fade" id="del1" tabindex="-1" role="dialog"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">确定删除吗?</h5>
                                                                    <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-dismiss="modal">取消</button>
                                                                    <button @click="tDel(index)" type="button" class="btn btn-primary"
                                                                        data-dismiss="modal">确定</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>

                                            <div class="form-group">
                                                <div class="row">
                                                    <input v-model="ateacher" type="text" class="form-control col-lg-9"
                                                        placeholder="教员名字">
                                                    <button @click="addT()" type="button" class="btn btn-outline-success col-lg-2 offset-lg-1">添加</button>

                                                </div>
                                                <small id="atErr" class="form-text text-danger"></small>
                                            </div>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- 学员列表 -->
                        <div v-else-if="btn[3]==1">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th scope="col">编号</th>
                                                <th scope="col">学员名字</th>
                                                <th scope="col">操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(stu, index) in qstudent" :key="index">
                                                <th scope="row">{{index+1}}</th>
                                                <td>{{stu.name}}</td>
                                                <td>
                                                    <button type="button" class="btn btn-outline-danger btn-sm"
                                                        data-toggle="modal" data-target="#del2">删除</button>

                                                    <!-- Modal -->
                                                    <div class="modal fade" id="del2" tabindex="-1" role="dialog"
                                                        aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLongTitle">确定删除吗?</h5>
                                                                    <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-dismiss="modal">取消</button>
                                                                    <button @click="sDel(index)" type="button" class="btn btn-primary"
                                                                        data-dismiss="modal">确定</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </td>
                                            </tr>

                                            <div class="form-group">
                                                <div class="row">
                                                    <input v-model="astudent" type="text" class="form-control col-lg-9"
                                                        placeholder="学员名字">
                                                    <button @click="addS()" type="button" class="btn btn-outline-success col-lg-2 offset-lg-1">添加</button>
                                                </div>
                                                <small id="asErr" class="form-text text-danger"></small>
                                            </div>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- 题目列表 -->
                        <div v-else-if="btn[4]==1">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th scope="col">题目编号</th>
                                                <th scope="col">内容</th>
                                                <th scope="col">选项</th>
                                                <!-- <th scope="col">操作</th> -->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(sub, index) in subject" :key="index">
                                                <th scope="row">{{index+1}}</th>
                                                <td>{{sub}}</td>
                                                <td>
                                                    <ul>
                                                        <li v-if="i.sub_id==index+1" v-for="(i, iIndex) in assitems"
                                                            :key="iIndex">{{i.content}}({{i.score}}分)</li>
                                                    </ul>
                                                </td>
                                                <!-- <td>
                                                    <button type="button" class="btn btn-outline-danger btn-sm">删除</button>
                                                    <button type="button" class="btn btn-outline-primary btn-sm">编辑</button>
                                                </td> -->
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- 设置密保问题 -->
                        <div v-else-if="btn[5]==1">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <div class="form-group">
                                        <label for="">密保问题</label>
                                        <input v-model="refque" type="text" class="form-control" placeholder="请输入密保问题">
                                    </div>
                                    <div class="form-group">
                                        <label for="">密保答案</label>
                                        <input v-model="refans" type="text" class="form-control" placeholder="请输入密保答案">
                                    </div>
                                    <button @click="secure()" type="button" class="btn btn-success">确认</button>
                                </div>
                            </div>
                        </div>
                        <!-- 修改密码 -->
                        <div v-show="btn[6]==1">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <div class="form-group">
                                        <label>旧密码</label>
                                        <input v-model="opwd" type="text" class="form-control" placeholder="请输入旧密码">
                                        <small id="pwdErr" class="form-text text-danger"></small>
                                    </div>
                                    <div class="form-group">
                                        <label>新密码</label>
                                        <input v-model="npwd" type="text" class="form-control" placeholder="请输入新密码">
                                    </div>
                                    <button @click="pwd()" type="button" class="btn btn-success">确认</button>
                                </div>
                            </div>
                        </div>
                        <!-- 初始页面 -->
                        <div v-if="!(btn[0]==1 || btn[1]==1 || btn[2]==1 || btn[3]==1 || btn[4]==1 || btn[5]==1 || btn[6]==1)"
                            class="container-fluid px-0">
                            <div class="row">
                                <div class="col-lg-8 offset-lg-2 py-4">
                                    <h2 class="text-center align-middle">hello,{{username}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>


    <script>
        new Vue({
            el: "#app",
            data: {
                //用户名
                username: '',
                //点击按钮对应的显示
                btn: [0, 0, 0, 0, 0, 0, 0],
                //路由显示
                navcontent: ['查询教员评分', '评分', '教员列表', '学员列表', '题目列表', '设置密保问题', '修改密码'],
                //设置
                set: 0,
                //权限记录
                authority: 1,
                //记录是否显示查询结果
                qu: 0,
                subjectNum: [1, 2, 3, 4, 5, 6, 7, 8],
                act: 1,
                subject: [],
                items: [],
                sum: 0,
                teacher: '',
                show: false,
                avg: [0, 0, 0, 0, 0, 0, 0, 0],
                max: [3, 2, 2, 6, 6, 6, 3, 2],
                //记录评分
                className: '',
                subject: [],
                assitems: [],
                answer: -1,
                answersIndex: [],
                answers: [],
                site: -1,
                sumScore: 0,
                //查询教员/学员
                qstudent: [],
                qteacher: [],
                //修改密保问题
                refque: '',
                refans: '',
                //修改密码
                opwd: '',
                npwd: '',
                //添加教员/学员
                ateacher: '',
                astudent: '',
                //图表
                chart: false,
            },
            methods: {
                select: function (n) {
                    this.act = n;
                },
                //查询教员得分
                query: function () {
                    this.chart = true;

                    this.avg = [0, 0, 0, 0, 0, 0, 0, 0];
                    this.sum = 0;
                    axios.get('/v1/user/queryTotal', {
                            params: {
                                teacher: this.teacher,
                            }
                        })
                        .then((response) => {
                            if (response.data.length != 0) {
                                response.data.forEach(s => {
                                    this.sum += s;
                                });
                                this.sum = this.sum / response.data.length;
                            }
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                    axios.get('/v1/user/querySelect', {
                            params: {
                                teacher: this.teacher,
                            }
                        })
                        .then((response) => {
                            let num = 0;
                            this.items = response.data;
                            this.items.forEach(i => {
                                this.avg[i.sub_id - 1] += i.score;
                                if (i.sub_id == 1) {
                                    num++;
                                }
                            });

                            for (let a = 0; a < this.avg.length; a++) {
                                this.avg[a] = this.avg[a] / num / this.max[a] * 100;
                                this.avg[a] = this.avg[a].toFixed(2);
                            }
                            this.avg.push((this.sum * 100 / 30).toFixed(2));

                            // 基于准备好的dom，初始化echarts实例
                            let myChart = echarts.init(document.getElementById('c1'));
                            // 指定图表的配置项和数据
                            let option = {
                                title: {
                                    text: '得分比率条形图',
                                },
                                tooltip: {},
                                legend: {
                                    data: ['得分比率']
                                },
                                xAxis: {
                                    data: ["第一题", "第二题", "第三题", "第四题", "第五题", "第六题", "第七题", "第八题",
                                        "总分"
                                    ]
                                },
                                yAxis: {
                                    type: 'value',
                                    axisLabel: {
                                        show: true,
                                        interval: 'auto',
                                        formatter: '{value} %'
                                    }
                                },
                                series: [{
                                    name: '得分比率',
                                    type: 'bar',
                                    barWidth: 15,
                                    itemStyle: {
                                        normal: {
                                            label: {
                                                show: true,
                                                position: 'top',
                                                formatter: '{c}%'
                                            }
                                        }
                                    },
                                    data: this.avg,
                                }]
                            };
                            // 使用刚指定的配置项和数据显示图表。
                            myChart.setOption(option);

                            if (this.items.length == 0) {
                                $("#notfound").text("此教员没有相关的评分");
                            } else {
                                this.qu = 1;
                                $("#notfound").text("");
                            }
                        })
                        .catch((error) => {
                            console.log(error);

                        });
                    axios.get('/v1/user/querySubject')
                        .then((response) => {
                            this.subject = response.data;
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                },
                next: function () {
                    this.site++;
                    this.answersIndex.push(this.answer + 1);
                    this.answers.push(this.assitems[this.answer].score);
                    this.answer = -1;
                },
                nextPace: function () {
                    this.site++;
                },
                submit: function () {
                    this.site++;
                    this.answersIndex.push(this.answer + 1);
                    this.answers.push(this.assitems[this.answer].score);
                    this.answers.forEach(ans => {
                        this.sumScore += ans;
                    });
                    axios.post('/v1/user/submit', {
                            teacherName: this.teacher,
                            className: this.className,
                            sumScore: this.sumScore,
                            itemId: this.answersIndex,
                        })
                        .then((response) => {
                            // console.log(response.data);
                        })
                        .catch((error) => {
                            console.log(error);
                        })
                },
                b: function (n) {
                    this.chart = false;
                    this.qu = 0;
                    this.teacher = '';
                    this.site = -1;
                    this.btn = [0, 0, 0, 0, 0, 0, 0];
                    this.btn[n] = 1;
                },
                secure: function () {
                    axios.post('/v1/user/changeSecureQ', {
                            name: this.username,
                            question: this.refque,
                            answer: this.refans,
                        })
                        .then((response) => {
                            this.refque = '';
                            this.refans = '';
                            this.btn = [0, 0, 0, 0, 0, 0, 0];
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                },
                pwd: function () {
                    axios.post('/v1/user/changePwd', {
                            newpwd: this.npwd,
                            oldpwd: this.opwd,
                            name: this.username,
                        })
                        .then((response) => {
                            if (!response.data) {
                                $('#pwdErr').text("旧密码不正确!");
                            } else {
                                $('#pwdErr').text("");
                                this.opwd = '';
                                this.npwd = '';
                                this.btn = [0, 0, 0, 0, 0, 0, 0];
                            }
                        })
                        .catch((error) => {
                            console.log(error);

                        })
                },
                tDel: function (n) {
                    let tname = this.qteacher[n].name;
                    console.log(tname);

                    axios.post('/v1/user/delMember', {
                            name: tname,
                        })
                        .then((response) => {
                            console.log(response.data);
                            if (tname === "bob") {
                                window.alert('初始管理不可删除!');
                            } else {
                                this.qteacher.splice(n, 1);
                            }

                        })
                        .catch((error) => {
                            console.log(error);

                        });
                },
                sDel: function (n) {
                    let sname = this.qstudent[n].name;
                    console.log(sname);

                    axios.post('/v1/user/delMember', {
                            name: sname,
                        })
                        .then((response) => {
                            console.log(response.data);
                            this.qstudent.splice(n, 1);
                        })
                        .catch((error) => {
                            console.log(error);

                        });
                },
                accredit: function (n) {
                    let tname = this.qteacher[n].name;
                    axios.post('/v1/user/accredit', {
                            name: tname,
                        })
                        .then((response) => {
                            this.qteacher[n].authority = 1;
                        })
                        .catch((error) => {
                            console.log(error);
                        })

                },
                addT: function () {
                    let at = true;
                    for (let t = 0; t < this.qteacher.length; t++) {
                        if (this.qteacher[t].name === this.ateacher) {
                            $("#atErr").text("该教员已存在");
                            at = false;
                        }
                    }
                    if (at) {
                        $("#atErr").text("");
                        axios.post('/v1/user/addMember', {
                                name: this.ateacher,
                                authority: '2',
                                role: '教员',
                            })
                            .then((response) => {
                                console.log(response.data);
                                this.qteacher.push({
                                    name: this.ateacher,
                                    authority: 2
                                });
                                this.ateacher = '';
                            })
                            .catch((error) => {
                                console.log(error);
                            });

                    }
                },
                addS: function () {
                    console.log(this.astudent);
                    let at = true;
                    for (let s = 0; s < this.qteacher.length; s++) {
                        if (this.qteacher[s].name === this.ateacher) {
                            $("#asErr").text("该学员已存在");
                            at = false;
                        }
                    }
                    if (at) {
                        $("#asErr").text("");
                        axios.post('/v1/user/addMember', {
                                name: this.astudent,
                                authority: '3',
                                role: '学员',
                            })
                            .then((response) => {
                                this.qstudent.push({
                                    name: this.astudent
                                });
                                this.astudent = '';
                            })
                            .catch((error) => {
                                console.log(error);
                            });


                    }
                },

            },
            mounted: function () {
                axios.get('/v1/user/querySubject')
                    .then((response) => {
                        this.subject = response.data;
                    })
                    .catch((error) => {
                        console.log('error');
                    });
                axios.get('/v1/user/queryItems')
                    .then((response) => {
                        this.assitems = response.data;
                    })
                    .catch((error) => {
                        console.log('error');
                    });
                axios.get('/v1/login')
                    .then((response) => {
                        this.username = response.data.name;
                        this.authority = response.data.authority;
                    })
                    .catch((error) => {
                        console.log(error);
                    });
                axios.get('/v1/user/allMember', {
                        params: {
                            role: '教员',
                        }
                    })
                    .then((response) => {
                        this.qteacher = response.data;
                    })
                    .catch((error) => {
                        console.log(error);
                    });
                axios.get('/v1/user/allMember', {
                        params: {
                            role: '学员',
                        }
                    })
                    .then((response) => {
                        this.qstudent = response.data;
                    })
                    .catch((error) => {
                        console.log(error);
                    });
            },

        });
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
        crossorigin="anonymous"></script>
</body>

</html>